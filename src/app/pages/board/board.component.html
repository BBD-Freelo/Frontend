<div class="boards-container">
  <app-header></app-header>
  <mat-sidenav-container id="navcontainer">
    <mat-sidenav mode="side" opened class="sidenav">
        <app-navbar></app-navbar>
    </mat-sidenav>
    <mat-sidenav-content id="maincontent">
      @defer (when found) {
        @for (list of board?.lists; track list) {
          <div class="list-column">
            <div class="list-header">
              <h2>{{ list.listName }}</h2>
              <button (click)="openDeleteDialog(list)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
            <div class="list-container">
              <div
                cdkDropList
                [id]=list.listId.toString()
                [cdkDropListData]="list.tickets"
                [cdkDropListConnectedTo]="getConnectedLists(list.listId)"
                class="list"
                (cdkDropListDropped)="drop($event)">
                @for (ticket of list.tickets; track ticket) {
                  <app-ticket [ticket]="ticket" [collaborators]="board.collaborators" (removeTicket)="removeTicket($event)" (updateTicket)="updateTicket($event)"></app-ticket>
                }
              </div>
            </div>
            <app-add-ticket [listId]="list.listId" (newTicket)="addNewTicket($event)"></app-add-ticket>
          </div>
        }
      } @placeholder {
        @if (!error) {
          <div class="loader">
            <mat-spinner color="accent"></mat-spinner>
          </div>
        }
      }
      @if (found) {
        <div class="addlist-container">
          <h2>Add List</h2>
          <app-add-list [boardId]="this.currentBoard" (newList)="handleNewList($event)"></app-add-list>
        </div>
      }
      @if (error) {
        No Board found :(
      }
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
